CFLAGS=-O1 -fno-slp-vectorize -g -std=c11 -L$(FPROOT)/obj -lfpsanitizer -lmpfr -lm -pthread 
#CFLAGS=-O1 -fno-slp-vectorize -g -std=c11 -L$(FPROOT)/obj -lfpsanitizer -lmpfr -lm ../SoftPosit/build/Linux-x86_64-GCC/softposit.a  -I../SoftPosit/source/include 
CAMLFLAGs=
CSRC = $(wildcard *.c)
COUT = $(patsubst %.c,%.c.out,$(CSRC))
COUT = $(patsubst %.c,%.bc,$(CSRC))

CC = clang  -emit-llvm -O1 -fno-slp-vectorize -fno-vectorize   -Ilibutil -I .  

all: $(COUT) $(CAMLOUT)

#testprog.c.out: testprog.c
#	$(CC) -o $@ $< $(CFLAGS) -lmpfr
#	chmod u+x $@

%.bc: %.c
	$(CC) -c -o $@ $< $(CFLAGS)
	llvm-dis $@

%.sout: %.s
	$(CC) -o $@ $< $(CFLAGS)
	chmod u+x $@

%.s: %.c
	$(CC) $(CFLAGS) -S -o $@ $<


clean:
	rm -rf *.bc *.ll *.out *.sout *.dSYM
